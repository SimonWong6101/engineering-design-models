(modeller start)
(load "plisp/load_functions.l")
(define workpiece body)
(workpiece receive "olps_workpiece_in.xmt_txt")
(workpiece point '(0 0 0))
(workpiece direction '(0 1 0))
(workpiece angle -30.0)
(workpiece rotate)
(translate_body 0.0 0.0 0.0)
(init_graphics)
(setq mrsev nil)
(princ "Save mrsev's? (y/n) ")
(cond ((equal (read) 'y) (setq mrsev t))
      (t nil))
(setq remos nil)
(princ "Save removed volumes? (y/n) ")
(cond ((equal (read) 'y) (setq remos t))
      (t nil))
(setq interm nil)
(princ "Save intermediates? (y/n) ")
(cond ((equal (read) 'y) (setq interm t))
      (t nil))
(make_pocket 'rectangular_pocket1 4.513139720814413 2.25 7.657114317029974 3.0 5.8 1.25 0.6)
(graphics sketch 'rectangular_pocket1)
(cond (mrsev
       (rectangular_pocket1 transmit "rectangular_pocket1"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket1)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_1")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket1)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_1")
       (workpiece state 'new))
      (t nil))
(make_other_pocket 'rectangular_pocket_with_islands2 '(
(7.163139720814414 -0.65)
(7.163139720814414 5.15)
(1.8631397208144134 5.15)
(1.8631397208144134 -0.65)) 6.657114317029974 '(
0.6
0.6
0.6
0.6) 1.0)
(make_other_pocket 'rectangular_pocket_with_islands2_isle_1 '(
(1.01 -0.76)
(1.01 1.26)
(-1.01 1.26)
(-1.01 -0.76)) 0.0 '(
1.01
1.01
1.01
1.01) 1.0)
(rectangular_pocket_with_islands2_isle_1 direction '(4.513139720814413 2.25 6.657114317029974))
(rectangular_pocket_with_islands2_isle_1 move)
(rectangular_pocket_with_islands2 subtract 'rectangular_pocket_with_islands2_isle_1)
(graphics sketch 'rectangular_pocket_with_islands2)
(cond (mrsev
       (rectangular_pocket_with_islands2 transmit "rectangular_pocket_with_islands2"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket_with_islands2)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_2")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket_with_islands2)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_2")
       (workpiece state 'new))
      (t nil))
(make_center_drill_hole 'hole3 4.513139720814413 2.5 7.657114317029974 0.08 90.0)
(graphics sketch 'hole3)
(cond (mrsev
       (hole3 transmit "hole3"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'hole3)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_3")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'hole3)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_3")
       (workpiece state 'new))
      (t nil))
(make_drill_hole 'hole4 4.513139720814413 2.5 4.797414317029974 2.8598 0.25 118.0)
(graphics sketch 'hole4)
(cond (mrsev
       (hole4 transmit "hole4"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'hole4)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_4")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'hole4)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_4")
       (workpiece state 'new))
      (t nil))
(make_other_pocket 'rectangular_pocket_with_islands5 '(
(7.163139720814414 -0.65)
(7.163139720814414 5.15)
(1.8631397208144134 5.15)
(1.8631397208144134 -0.65)) 6.647114317029974 '(
0.6
0.6
0.6
0.6) 1.0)
(make_other_pocket 'rectangular_pocket_with_islands5_isle_1 '(
(1.0 -0.75)
(1.0 1.25)
(-1.0 1.25)
(-1.0 -0.75)) 0.0 '(
1.0
1.0
1.0
1.0) 1.0)
(rectangular_pocket_with_islands5_isle_1 direction '(4.513139720814413 2.25 6.647114317029974))
(rectangular_pocket_with_islands5_isle_1 move)
(rectangular_pocket_with_islands5 subtract 'rectangular_pocket_with_islands5_isle_1)
(graphics sketch 'rectangular_pocket_with_islands5)
(cond (mrsev
       (rectangular_pocket_with_islands5 transmit "rectangular_pocket_with_islands5"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket_with_islands5)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_5")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket_with_islands5)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_5")
       (workpiece state 'new))
      (t nil))
(make_pocket 'rectangular_pocket6 4.513139720814413 2.5 7.647114317029974 2.2 2.2 0.02 1.1)
(graphics sketch 'rectangular_pocket6)
(cond (mrsev
       (rectangular_pocket6 transmit "rectangular_pocket6"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket6)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_6")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket6)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_6")
       (workpiece state 'new))
      (t nil))
(make_hole 'hole7 4.513139720814413 2.5 5.647114317029974 2.0 0.5)
(graphics sketch 'hole7)
(cond (mrsev
       (hole7 transmit "hole7"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'hole7)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_7")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'hole7)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_7")
       (workpiece state 'new))
      (t nil))
(workpiece merge)
(translate_body 0.0 0.0 0.0)
(workpiece point '(0 0 0))
(workpiece direction '(0 1 0))
(workpiece angle 30.0)
(workpiece rotate)
(workpiece transmit "olps_workpiece_out")
(graphics clear)
(graphics sketch 'workpiece)
(graphics ar)
-- (quit)
