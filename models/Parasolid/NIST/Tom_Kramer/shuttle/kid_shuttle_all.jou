(modeller start)
(load "plisp/load_functions.l")
(define workpiece body)
(workpiece receive "olps_workpiece_in.xmt_txt")
(translate_body 0.0 0.0 0.0)
(init_graphics)
(setq mrsev nil)
(princ "Save mrsev's? (y/n) ")
(cond ((equal (read) 'y) (setq mrsev t))
      (t nil))
(setq remos nil)
(princ "Save removed volumes? (y/n) ")
(cond ((equal (read) 'y) (setq remos t))
      (t nil))
(setq interm nil)
(princ "Save intermediates? (y/n) ")
(cond ((equal (read) 'y) (setq interm t))
      (t nil))
(make_pocket 'rectangular_pocket1 4.51 2.495 0.0 3.5 2.91 0.5 0.5)
(graphics sketch 'rectangular_pocket1)
(cond (mrsev
       (rectangular_pocket1 transmit "rectangular_pocket1"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket1)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_1")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket1)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_1"))
      (t nil))
(make_pocket 'rectangular_pocket2 1.76 2.495 0.0 3.0 2.12 1.24 0.3)
(graphics sketch 'rectangular_pocket2)
(cond (mrsev
       (rectangular_pocket2 transmit "rectangular_pocket2"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket2)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_2")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket2)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_2"))
      (t nil))
(make_pocket 'rectangular_pocket3 4.16 2.495 0.4 2.2 6.0 1.1 0.5)
(graphics sketch 'rectangular_pocket3)
(cond (mrsev
       (rectangular_pocket3 transmit "rectangular_pocket3"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket3)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_3")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket3)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_3"))
      (t nil))
(make_pocket 'rectangular_pocket4 1.53 0.5875 0.48 4.1 1.175 1.02 0.5)
(graphics sketch 'rectangular_pocket4)
(cond (mrsev
       (rectangular_pocket4 transmit "rectangular_pocket4"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket4)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_4")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket4)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_4"))
      (t nil))
(make_pocket 'rectangular_pocket5 1.53 4.4025 0.48 4.1 1.175 1.02 0.5)
(graphics sketch 'rectangular_pocket5)
(cond (mrsev
       (rectangular_pocket5 transmit "rectangular_pocket5"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket5)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_5")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket5)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_5"))
      (t nil))
(make_pocket 'rectangular_pocket6 3.26 2.495 0.48 1.0 3.8 1.02 0.5)
(graphics sketch 'rectangular_pocket6)
(cond (mrsev
       (rectangular_pocket6 transmit "rectangular_pocket6"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket6)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_6")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket6)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_6"))
      (t nil))
(make_pocket 'rectangular_pocket7 2.76 2.495 1.2 0.6 1.13 0.3 0.2)
(graphics sketch 'rectangular_pocket7)
(cond (mrsev
       (rectangular_pocket7 transmit "rectangular_pocket7"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket7)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_7")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket7)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_7"))
      (t nil))
(workpiece merge)
(translate_body 0.0 0.0 0.0)
(workpiece transmit "olps_workpiece_out")
(graphics clear)
(graphics sketch 'workpiece)
(graphics ar)
-- (quit)
