(modeller start)
(load "plisp/load_functions.l")
(define workpiece body)
(workpiece receive "olps_workpiece_in.xmt_txt")
(translate_body 0.0 0.0 0.0)
(init_graphics)
(setq mrsev nil)
(princ "Save mrsev's? (y/n) ")
(cond ((equal (read) 'y) (setq mrsev t))
      (t nil))
(setq remos nil)
(princ "Save removed volumes? (y/n) ")
(cond ((equal (read) 'y) (setq remos t))
      (t nil))
(setq interm nil)
(princ "Save intermediates? (y/n) ")
(cond ((equal (read) 'y) (setq interm t))
      (t nil))
(make_pocket 'rectangular_pocket1 2.63 2.495 1.0 3.0 2.0 0.5 0.7)
(rectangular_pocket1 point '(2.63 2.495 1.0))
(rectangular_pocket1 direction '(0 0 1))
(rectangular_pocket1 angle 40.0)
(rectangular_pocket1 rotate)
(graphics sketch 'rectangular_pocket1)
(cond (mrsev
       (rectangular_pocket1 transmit "rectangular_pocket1"))
      (t nil))
(cond (remos
       (define removed body)
       (define interim body)
       (removed replicate 'rectangular_pocket1)
       (interim replicate 'workpiece)
       (removed intersect 'interim)
       (removed transmit "removed_1")
       (undefine interim)
       (undefine removed))
      (t nil))
(workpiece subtract 'rectangular_pocket1)
(graphics clear)
(graphics sketch 'workpiece)
(cond (interm
       (workpiece transmit "intermediate_1")
       (workpiece state 'new))
      (t nil))
(workpiece merge)
(translate_body 0.0 0.0 0.0)
(workpiece transmit "olps_workpiece_out")
(graphics clear)
(graphics sketch 'workpiece)
(graphics ar)
-- (quit)
